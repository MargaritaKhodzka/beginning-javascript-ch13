<!DOCTYPE html>
<html>
  <head>
    <title>Chapter 13: Question 2</title>
  </head>

  <body>
    <script>
      var ads = [
        "Buy product A",
        "You need product B",
        "Product C is the best!"
      ]

      function getRandomNumber(min, max) {
        return Math.floor((Math.random() * max) + min)
      }

      var lastAdNumber = localStorage.getItem("lastAdNumber")
      var nextNumber = getRandomNumber(0, ads.length)

      if (lastAdNumber == null) {
        lastAdNumber = nextNumber
      } else {
        lastAdNumber = parseInt(lastAdNumber, 10)
        while (lastAdNumber == nextNumber) {
          nextNumber = getRandomNumber(0, ads.length)
        }
      }

      localStorage.setItem("lastAdNumber", nextNumber)
      document.write(ads[nextNumber])
    </script>
  </body>
</html>
